\begin{Schunk}
% --begin: "casestudy-assoc-arules"
\begin{Sinput}
library(arules)
\end{Sinput}
\begin{Soutput}
## Loading required package: Matrix
\end{Soutput}
\begin{Soutput}
## 
## Attaching package: 'arules'
\end{Soutput}
\begin{Soutput}
## The following objects are masked from 'package:base':
## 
##     abbreviate, write
\end{Soutput}
\begin{Sinput}
adata <- data.frame(
  Sepal.Length=cut(iris$Sepal.Length, 5),
  Sepal.Width=cut(iris$Sepal.Width, 5),
  Petal.Length=cut(iris$Petal.Length, 5),
  Petal.Width=cut(iris$Petal.Width, 5),
  Species=iris$Species
)

tdata <- transactions(adata)
rules <- apriori(tdata, 
                 parameter=list(support=0.05,
                                target='rules'),
                 appearance=list(lhs=grep('Species=', itemLabels(tdata), invert=TRUE, value=TRUE),
                                 rhs=grep('Species=', itemLabels(tdata), value=TRUE)))
\end{Sinput}
\begin{Soutput}
## Apriori
## 
## Parameter specification:
##  confidence minval smax arem  aval originalSupport maxtime support minlen
##         0.8    0.1    1 none FALSE            TRUE       5    0.05      1
##  maxlen target  ext
##      10  rules TRUE
## 
## Algorithmic control:
##  filter tree heap memopt load sort verbose
##     0.1 TRUE TRUE  FALSE TRUE    2    TRUE
## 
## Absolute minimum support count: 7 
## 
## set item appearances ...[23 item(s)] done [0.00s].
## set transactions ...[23 item(s), 150 transaction(s)] done [0.00s].
## sorting and recoding items ... [21 item(s)] done [0.00s].
## creating transaction tree ... done [0.00s].
## checking subsets of size 1 2 3 4 5 done [0.00s].
## writing ... [64 rule(s)] done [0.00s].
## creating S4 object  ... done [0.00s].
\end{Soutput}
\begin{Sinput}
inspect(head(rules, by='support', n=10))
\end{Sinput}
\begin{Soutput}
##      lhs                            rhs                    support confidence  coverage     lift count
## [1]  {Petal.Length=(0.994,2.18]} => {Species=setosa}     0.3333333  1.0000000 0.3333333 3.000000    50
## [2]  {Petal.Width=(0.0976,0.58]} => {Species=setosa}     0.3266667  1.0000000 0.3266667 3.000000    49
## [3]  {Petal.Length=(0.994,2.18],                                                                      
##       Petal.Width=(0.0976,0.58]} => {Species=setosa}     0.3266667  1.0000000 0.3266667 3.000000    49
## [4]  {Petal.Width=(1.06,1.54]}   => {Species=versicolor} 0.2533333  0.9268293 0.2733333 2.780488    38
## [5]  {Petal.Length=(3.36,4.54]}  => {Species=versicolor} 0.2200000  0.9705882 0.2266667 2.911765    33
## [6]  {Sepal.Length=(4.3,5.02]}   => {Species=setosa}     0.1866667  0.8750000 0.2133333 2.625000    28
## [7]  {Sepal.Length=(4.3,5.02],                                                                        
##       Petal.Length=(0.994,2.18]} => {Species=setosa}     0.1866667  1.0000000 0.1866667 3.000000    28
## [8]  {Sepal.Length=(4.3,5.02],                                                                        
##       Petal.Width=(0.0976,0.58]} => {Species=setosa}     0.1800000  1.0000000 0.1800000 3.000000    27
## [9]  {Petal.Length=(3.36,4.54],                                                                       
##       Petal.Width=(1.06,1.54]}   => {Species=versicolor} 0.1800000  1.0000000 0.1800000 3.000000    27
## [10] {Sepal.Length=(4.3,5.02],                                                                        
##       Petal.Length=(0.994,2.18],                                                                      
##       Petal.Width=(0.0976,0.58]} => {Species=setosa}     0.1800000  1.0000000 0.1800000 3.000000    27
\end{Soutput}
%
% --end: "casestudy-assoc-arules"
\end{Schunk}
